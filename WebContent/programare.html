<!--  <?php
  session_start();
?>
-->
<!DOCTYPE html>
<html lang="en">
  <head>


    <meta charset="utf-8">
    <meta charset="ISO-8859-1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Programare</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="css/util.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">

    <!-- Custom styles for this template -->
    <link href="css/agency.css" rel="stylesheet">

  </head>

  <body id="page-top">

    <!-- Navigatie -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="index.html">Beauty Corner</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav text-uppercase ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="index.html#services">Servicii</a>
            </li>
             <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownServices" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Prețuri
              </a>
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownServices">
                <a class="dropdown-item" href="machiaj.html">Machiaj</a>
                <a class="dropdown-item" href="coafura.html">Coafură</a>
                <a class="dropdown-item" href="oferte.html">Oferte</a>
              </div>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="index.html#about">Despre</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="index.html#team">Echipa</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="index.html#contact">Contact</a>
            </li>
            <!--  
            <?php
            if (isset($_SESSION['userId'])) {
            echo 
            '--><li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="programare.html">Programare</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="logout.html">Logout</a>
            </li><!--  ';
            }
            else {
            echo
            '--><li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="login.jsp">Login</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="register.html">Register</a>
            </li><!--  '; 
            }
            ?>-->
          </ul>
        </div>
      </div>
    </nav>
    
    <!-- Programare -->
    <section id="contact">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h2 class="section-heading text-uppercase">PROGRAMARE</h2>
            <h3 class="section-subheading text-muted"></h3>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12">
            <form id="Programare" action="includes/submitProg.html" method="post">
              <div class="row">
                <div class="col-md-6">

                  <div class="form-group">
                    <select class="form-control" id="serviciuPicker" name="serviciu" type="text" required="required" > 
                      <option value="" disabled selected>Serviciu</option>
                      <option value="Machiaj">Machiaj</option>
                      <option value="Coafură">Coafură</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <input class="form-control" id="datePicker" name="data" type="date" placeholder="Data" required="required" data-validation-required-message="Alege o zi!">
                    <select class="form-control" id="oraPicker" name="ora" type="text" required="required" disabled="true"> 
                    </select>
                  </div>
                  <div class="form-group">
                    <input class="form-control" id="nameField" name="nume" type="text" placeholder="Nume Prenume" required="required" data-validation-required-message="Completează numele!">
                    <p class="help-block text-danger"></p>
                  </div>
                  <div class="form-group">
                    <input class="form-control" id="phoneField" name="phone" type="tel" placeholder="Telefon" required="required" data-validation-required-message="Completează numărul de telefon!">
                    <p class="help-block text-danger"></p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <textarea class="form-control"id="detaliiText" name="detalii" placeholder="Alte detalii..."></textarea>
                    <p class="help-block text-danger"></p>
                  </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-lg-12 text-center">
                  <div id="success"></div>
                  <button id="submit" type="submit" name="prog-submit" class="btn btn-primary btn-xl text-uppercase">Programează-te!</button>
                </div>
                <div class="col-lg-12 text-center">
                  <span id="info" style="color:green">Info</span>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>

  <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <span class="copyright">Copyright &copy; Beauty Corner 2018</span>
          </div>
          <div class="col-md-4">
            <ul class="list-inline social-buttons">
              <li class="list-inline-item">
                <a href="https://twitter.com/beautycorner_17">
                  <i class="fab fa-twitter"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="https://www.facebook.com/Beauty-Corner-1721063864855508/">
                  <i class="fab fa-facebook-f"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="https://www.instagram.com/explore/locations/228446904/beauty-corner/">
                  <i class="fab fa-instagram"></i>
                </a>
              </li>
            </ul>
          </div>
          <div class="col-md-4">
            <span class="copyright">Andra Seserman + Alexandra Popa</span>
          </div>
        </div>
      </div>
    </footer>


    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Contact form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/agency.min.js"></script>

    <script>

      var datePicker = document.getElementById('datePicker');

      datePicker.addEventListener("input", function(e) {
        var selectedDate = new Date( e.target.value );
        var currentDate = new Date();

        var oraPicker = document.getElementById('oraPicker');

        oraPicker.options.length = 0;
        if( selectedDate < currentDate ){
          oraPicker.disabled = true;
          e.target.setCustomValidity('OH NOES! No spots left in the past. We look only into the future!');
        } else {
          oraPicker.disabled = false;
          e.target.setCustomValidity('');
          loadAvailableHours(selectedDate);
        }
      });

      var resultParam = getParameterByName('result');
      var info = document.getElementById('info');
      if(resultParam != null) {
        info.style.display = "block";
        if(resultParam == 'success') {
          info.style.color = "green";
          info.innerHTML = 'Programarea a fost cu succes!';
        } else if(resultParam == 'failure') {
          info.style.color = "red";
          info.innerHTML = 'Programarea nu a reusit!';
        }
      }
      else {
        info.style.display = "none";
      }

      function loadAvailableHours(selectedDate) {
        $.ajax({ url: 'includes/getAvailableHours.html',
         data: {
          currentDate: selectedDate.toLocaleDateString()
         },
         type: 'get',
         success: function(data) {
            var hours = JSON.parse(data);
            addToHourDropDown(hours);
          }
        });
      }

      function addToHourDropDown(availableHours) {
        var oraPicker = document.getElementById('oraPicker');

        var length = oraPicker.options.length;
        for (i = 0; i < length; i++) {
          select.options[i] = null;
        }

        for(hour of availableHours) {
          var option = document.createElement("option");
          option.text = hour;
          oraPicker.add(option);
        }
      }

      function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, '\\$&');
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
      }

    </script>

  </body>

</html>